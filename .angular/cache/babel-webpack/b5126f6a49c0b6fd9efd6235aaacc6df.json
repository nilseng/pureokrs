{"ast":null,"code":"import _classCallCheck from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { EventEmitter } from '@angular/core';\nimport { AuthenticationService } from '../../authentication.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../authentication.service\";\nimport * as i2 from \"@angular/forms\";\nexport var NewUserComponent = /*#__PURE__*/(function () {\n  var NewUserComponent = /*#__PURE__*/function () {\n    function NewUserComponent(auth) {\n      _classCallCheck(this, NewUserComponent);\n\n      this.auth = auth; //Tell parent component to hide this component when OKR is saved\n\n      this.hide = new EventEmitter();\n    }\n\n    _createClass(NewUserComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.auth.getUserDetails().subscribe(function (u) {\n          _this.user = u;\n          _this.credentials = {\n            company: _this.user.company,\n            email: '',\n            password: '',\n            name: ''\n          };\n        });\n      }\n    }, {\n      key: \"addUser\",\n      value: function addUser() {\n        var _this2 = this;\n\n        if (this.credentials.name == '' || this.credentials.email == '') {\n          console.log('Please complete name and email to add new user.');\n        } else {\n          this.randomPwd(function () {\n            if (_this2.credentials.password.length >= 16) {\n              _this2.auth.addUser(_this2.credentials).subscribe(function () {\n                _this2.hideNew();\n              });\n            } else {\n              console.log('Password not valid.');\n            }\n          });\n        }\n      }\n    }, {\n      key: \"randomPwd\",\n      value: function randomPwd(callback) {\n        var result = '';\n        var length = 16 + Math.floor(4 * Math.random());\n        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var charactersLength = characters.length;\n\n        for (var i = 0; i < length; i++) {\n          result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n\n        this.credentials.password = result;\n        callback();\n      }\n    }, {\n      key: \"hideNew\",\n      value: function hideNew() {\n        this.hide.emit(true);\n      }\n    }]);\n\n    return NewUserComponent;\n  }();\n\n  NewUserComponent.ɵfac = function NewUserComponent_Factory(t) {\n    return new (t || NewUserComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService));\n  };\n\n  NewUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewUserComponent,\n    selectors: [[\"app-new-user\"]],\n    outputs: {\n      hide: \"hide\"\n    },\n    decls: 13,\n    vars: 2,\n    consts: [[1, \"row\", \"my-4\", \"mx-1\"], [1, \"col-sm\", \"rounded\", \"bg-light\", \"p-2\"], [1, \"form-inline\", 3, \"submit\"], [\"for\", \"name\", 1, \"mx-1\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"placeholder\", \"Enter name\", 1, \"form-control\", \"mx-1\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"email\", 1, \"m-1\"], [\"id\", \"email\", \"id\", \"email\", \"name\", \"email\", \"type\", \"email\", \"required\", \"\", \"placeholder\", \"Enter email\", 1, \"form-control\", \"m-1\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"float-right\", \"m-1\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", \"float-right\", \"m-1\", 3, \"click\"]],\n    template: function NewUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"form\", 2);\n        i0.ɵɵlistener(\"submit\", function NewUserComponent_Template_form_submit_2_listener() {\n          return ctx.addUser();\n        });\n        i0.ɵɵelementStart(3, \"label\", 3);\n        i0.ɵɵtext(4, \"Full name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function NewUserComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.credentials.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"label\", 5);\n        i0.ɵɵtext(7, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function NewUserComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.credentials.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 7);\n        i0.ɵɵtext(10, \"Add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function NewUserComponent_Template_button_click_11_listener() {\n          return ctx.hideNew();\n        });\n        i0.ɵɵtext(12, \"Hide\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.credentials.name);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.credentials.email);\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i2.RequiredValidator],\n    encapsulation: 2\n  });\n  return NewUserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}