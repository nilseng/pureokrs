{"ast":null,"code":"import _classCallCheck from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { AuthenticationService } from '../authentication.service';\nimport { UserService } from '../user.service';\nimport { faTrashAlt, faPlusCircle, faUserNinja, faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport { ActivatedRoute } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../authentication.service\";\nimport * as i2 from \"../user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"node_modules/@fortawesome/angular-fontawesome\";\nimport * as i6 from \"./new-user/new-user.component\";\n\nfunction UsersComponent_h5_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var user_r5 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", user_r5.company, \"'s users.\");\n  }\n}\n\nfunction UsersComponent_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function UsersComponent_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      var ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.showUserForm();\n    });\n    i0.ɵɵelement(1, \"fa-icon\", 20);\n    i0.ɵɵtext(2, \" Add User\\n\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faPlusCircle);\n  }\n}\n\nfunction UsersComponent_app_new_user_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-new-user\", 21);\n    i0.ɵɵlistener(\"hide\", function UsersComponent_app_new_user_3_Template_app_new_user_hide_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      var ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.hideUserForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelement(2, \"fa-icon\", 20);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵelement(5, \"fa-icon\", 20);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelementStart(8, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_14_Template_button_click_8_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r13);\n      var user_r10 = restoredCtx.$implicit;\n      var ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.initDelete(user_r10);\n    });\n    i0.ɵɵelement(9, \"fa-icon\", 20);\n    i0.ɵɵtext(10, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var user_r10 = ctx.$implicit;\n    var ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faUserNinja);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r10.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faEnvelope);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r10.email, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faTrashAlt);\n  }\n}\n\nfunction UsersComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Do you want to delete \", ctx_r4.initDeleteUser.name, \" from PureOKRs? It is not possible to recover the user after it is deleted. \");\n  }\n}\n\nexport var UsersComponent = /*#__PURE__*/(function () {\n  var UsersComponent = /*#__PURE__*/function () {\n    function UsersComponent(auth, userService, route) {\n      _classCallCheck(this, UsersComponent);\n\n      this.auth = auth;\n      this.userService = userService;\n      this.route = route;\n      this.faTrashAlt = faTrashAlt;\n      this.faPlusCircle = faPlusCircle;\n      this.faUserNinja = faUserNinja;\n      this.faEnvelope = faEnvelope;\n      this.user$ = this.auth.getUserDetails();\n    }\n\n    _createClass(UsersComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.users = this.route.snapshot.data['users'];\n        this.userForm = false;\n      }\n    }, {\n      key: \"getUsers\",\n      value: function getUsers() {\n        var _this = this;\n\n        this.user$.subscribe(function (u) {\n          if (u.company) {\n            _this.userService.getUsers().subscribe(function (users) {\n              return _this.users = users;\n            });\n          }\n        });\n      }\n    }, {\n      key: \"showUserForm\",\n      value: function showUserForm() {\n        this.userForm = true;\n      }\n    }, {\n      key: \"hideUserForm\",\n      value: function hideUserForm(hide) {\n        this.userForm = false;\n        this.getUsers();\n      }\n    }, {\n      key: \"initDelete\",\n      value: function initDelete(user) {\n        this.initDeleteUser = user;\n      }\n    }, {\n      key: \"confirmDelete\",\n      value: function confirmDelete() {\n        var _this2 = this;\n\n        this.userService.deleteUser(this.initDeleteUser).subscribe(function () {\n          _this2.getUsers();\n\n          _this2.user$.subscribe(function (u) {\n            if (u.email === _this2.initDeleteUser.email) {\n              _this2.initDeleteUser = null;\n\n              _this2.auth.logout();\n            } else {\n              _this2.initDeleteUser = null;\n            }\n          });\n        });\n      }\n    }]);\n\n    return UsersComponent;\n  }();\n\n  UsersComponent.ɵfac = function UsersComponent_Factory(t) {\n    return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  UsersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsersComponent,\n    selectors: [[\"app-users\"]],\n    decls: 28,\n    vars: 7,\n    consts: [[\"class\", \"m-1\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-info my-4\", 3, \"click\", 4, \"ngIf\"], [3, \"hide\", 4, \"ngIf\"], [1, \"user-table\", \"table-responsive-sm\", \"bg-white\", \"py-2\", \"rounded\", \"mb-4\"], [1, \"table\", \"table-striped\", \"my-1\"], [2, \"border-top\", \"0\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"deleteModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"deleteModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"deleteModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [\"class\", \"modal-body\", 4, \"ngIf\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"m-1\"], [1, \"btn\", \"btn-sm\", \"btn-info\", \"my-4\", 3, \"click\"], [3, \"icon\"], [3, \"hide\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#deleteModal\", 1, \"btn\", \"btn-sm\", \"btn-danger\", \"float-right\", \"table-button\", \"mx-1\", 3, \"click\"], [1, \"modal-body\"]],\n    template: function UsersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, UsersComponent_h5_0_Template, 2, 1, \"h5\", 0);\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵtemplate(2, UsersComponent_button_2_Template, 3, 1, \"button\", 1);\n        i0.ɵɵtemplate(3, UsersComponent_app_new_user_3_Template, 1, 0, \"app-new-user\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"table\", 4);\n        i0.ɵɵelementStart(6, \"thead\");\n        i0.ɵɵelementStart(7, \"tr\", 5);\n        i0.ɵɵelementStart(8, \"th\", 6);\n        i0.ɵɵtext(9, \" Name \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\", 6);\n        i0.ɵɵtext(11, \" Email \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"th\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"tbody\");\n        i0.ɵɵtemplate(14, UsersComponent_tr_14_Template, 11, 5, \"tr\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 8);\n        i0.ɵɵelementStart(16, \"div\", 9);\n        i0.ɵɵelementStart(17, \"div\", 10);\n        i0.ɵɵelementStart(18, \"div\", 11);\n        i0.ɵɵelementStart(19, \"h5\", 12);\n        i0.ɵɵtext(20, \"Are you sure?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 13);\n        i0.ɵɵelementStart(22, \"span\", 14);\n        i0.ɵɵtext(23, \"\\xD7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, UsersComponent_div_24_Template, 2, 1, \"div\", 15);\n        i0.ɵɵelementStart(25, \"div\", 16);\n        i0.ɵɵelementStart(26, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function UsersComponent_Template_button_click_26_listener() {\n          return ctx.confirmDelete();\n        });\n        i0.ɵɵtext(27, \" Yes, delete \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 5, ctx.user$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.userForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.userForm);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.users);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.initDeleteUser);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i5.FaIconComponent, i6.NewUserComponent],\n    pipes: [i4.AsyncPipe],\n    styles: [\"@media only screen and (max-width: 820px){[class*=table-button][_ngcontent-%COMP%]{margin:1px}}.user-table[_ngcontent-%COMP%]{max-width:768px}\"]\n  });\n  return UsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}