{"ast":null,"code":"import _classCallCheck from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/teodordanielsen/pureokrs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nvar _c0 = [\"okrTreeNode\", \"\"];\n\nfunction NodeComponent__svg_rect_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelement(0, \"rect\", 7);\n  }\n\n  if (rf & 2) {\n    var ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"x\", ctx_r3.okrTreeNode.x + ctx_r3.okrTreeNode.data.offsetX + ctx_r3.okrTreeNode.data.width - 8)(\"width\", 8)(\"y\", ctx_r3.okrTreeNode.y + ctx_r3.okrTreeNode.data.offsetY + ctx_r3.okrTreeNode.data.height - ctx_r3.okrTreeNode.data.height * ctx_r3.progress)(\"height\", ctx_r3.okrTreeNode.data.height * ctx_r3.progress);\n  }\n}\n\nexport var NodeComponent = /*#__PURE__*/(function () {\n  var NodeComponent = /*#__PURE__*/function () {\n    function NodeComponent() {\n      _classCallCheck(this, NodeComponent);\n\n      this.okrNodeToEdit = new EventEmitter();\n    }\n\n    _createClass(NodeComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getProgress();\n      }\n    }, {\n      key: \"editOkr\",\n      value: function editOkr() {\n        this.okrNodeToEdit.emit(this.okrTreeNode);\n      }\n    }, {\n      key: \"getProgress\",\n      value: function getProgress() {\n        if (this.okrTreeNode.data.okr._id) {\n          var sum = 0;\n          var count = 0;\n          this.okrTreeNode.data.okr.keyResults.forEach(function (kr) {\n            if (kr.progress) {\n              sum += kr.progress;\n            }\n\n            count += 1;\n          });\n          this.progress = count ? sum / count / 100 : 0;\n        }\n      }\n    }]);\n\n    return NodeComponent;\n  }();\n\n  NodeComponent.ɵfac = function NodeComponent_Factory(t) {\n    return new (t || NodeComponent)();\n  };\n\n  NodeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NodeComponent,\n    selectors: [[\"\", \"okrTreeNode\", \"\"]],\n    inputs: {\n      okrTreeNode: \"okrTreeNode\"\n    },\n    outputs: {\n      okrNodeToEdit: \"okrNodeToEdit\"\n    },\n    attrs: _c0,\n    decls: 11,\n    vars: 12,\n    consts: [[\"nodeVisual\", \"\"], [\"data-toggle\", \"modal\", \"data-target\", \"#editOkrModal\", 1, \"OKRG\", 3, \"click\"], [1, \"OKRRect\"], [\"rect\", \"\"], [\"text\", \"\"], [1, \"objective\"], [\"fill\", \"#28a745\", 4, \"ngIf\"], [\"fill\", \"#28a745\"]],\n    template: function NodeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(0, \"g\", null, 0);\n        i0.ɵɵelementStart(2, \"g\", 1);\n        i0.ɵɵlistener(\"click\", function NodeComponent_Template__svg_g_click_2_listener() {\n          return ctx.editOkr();\n        });\n        i0.ɵɵelement(3, \"rect\", 2, 3);\n        i0.ɵɵelementStart(5, \"foreignObject\", null, 4);\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"p\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, NodeComponent__svg_rect_10_Template, 1, 4, \"rect\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵattribute(\"x\", ctx.okrTreeNode.x + ctx.okrTreeNode.data.offsetX)(\"y\", ctx.okrTreeNode.y + ctx.okrTreeNode.data.offsetY)(\"width\", ctx.okrTreeNode.data.width)(\"height\", ctx.okrTreeNode.data.height)(\"rx\", 2)(\"ry\", 2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵattribute(\"x\", ctx.okrTreeNode.x + ctx.okrTreeNode.data.offsetX)(\"y\", ctx.okrTreeNode.y + ctx.okrTreeNode.data.offsetY)(\"width\", ctx.okrTreeNode.data.width)(\"height\", ctx.okrTreeNode.data.height);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.okrTreeNode.data.okr.objective, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.progress);\n      }\n    },\n    directives: [i1.NgIf],\n    styles: [\".OKRG[_ngcontent-%COMP%]{cursor:pointer}.OKRRect[_ngcontent-%COMP%]{fill:#e4effc}.objective[_ngcontent-%COMP%]{height:100%;width:100%;padding:.3rem .5rem .3rem .3rem;font-size:.8rem;font-weight:bold}.objective[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:100%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}\"]\n  });\n  return NodeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}